<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <style>
        .container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            width: 600px;
            margin: auto;

        }

        button {
            width: 200px;
            height: 200px;
            cursor: pointer;
        }
    </style>

    <div class="container">
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
        <button></button>
    </div>


    <script>
        let color;
        let board = [];
        const reset = () => {
            board = [];
            console.log('22222222222')
            document.querySelectorAll('button').forEach((button) => {
                console.log('aaaaaaaaaaaaaaaa')
                button.style.backgroundColor = null;
            });
        }
        const evaluateWin = () => {
            if (board[0] === board[1] && board[1] === board[2] && board[0]) {
                return true
            } else if (board[3] === board[4] && board[4] === board[5] && board[3]) {
                return true
            } else if (board[6] === board[7] && board[7] === board[8] && board[6]) {
                return true

            } else if (board[0] === board[3] && board[3] === board[6] && board[0]) {
                return true
            } else if (board[1] === board[4] && board[4] === board[7] && board[1]) {
                return true
            } else if (board[2] === board[5] && board[5] === board[8] && board[2]) {
                return true


            } else if (board[0] === board[4] && board[4] === board[8] && board[0]) {
                return true
            } else if (board[2] === board[4] && board[4] === board[6] && board[2]) {
                return true
            }
            return false
        }

        document.querySelectorAll('button').forEach((button, index) => {
            button.addEventListener('click', () => {

                if (!button.style.backgroundColor) {
                    color = color === 'red' ? 'blue' : 'red';
                    button.style.backgroundColor = color;
                    board[index] = color;
                    if (evaluateWin()) {
                        alert('win')
                        if (confirm('play again?')) {
                            reset()
                        }
                    }
                } else {
                    alert('error')
                }


            });
        });

    </script>
</body>

</html>